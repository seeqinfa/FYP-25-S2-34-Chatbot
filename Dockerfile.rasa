FROM rasa/rasa:3.6.0

# Copy Rasa files
COPY . /app
WORKDIR /app

# Install any additional dependencies if needed
RUN pip install mysql-connector-python

# Train the model
RUN rasa train

# Expose ports for Rasa server and actions
EXPOSE 5005 5055

# Start script that runs both Rasa server and actions
CMD ["sh", "-c", "rasa run actions & rasa run --enable-api --cors '*' --port 5005"]